
class Conta:
    def __init__(self, nome, idade):
        self.nome = nome
        self.idade = idade
        self.saldo = 0.0      
        self.historico = []           

class Banco:
    def __init__(self, nome_banco):
        self.nome = nome_banco
        self.conta_ativa = None 
banco_sarinhapvp = Banco("sarinhaPVP")


def adcionar_conta():
    
    global banco_sarinhapvp
    print("====Bem-vindo ao Banco sarinhaPVP====")
    nome = input("Por favor, insira seu nome completo:\n ")
    idade = int(input("Por favor, insira sua idade:\n "))
    if idade < 18:
        print("Desculpe, você precisa ser maior de idade para criar uma conta.")
        return False
    else:
        nova_conta = Conta(nome, idade)
        banco_sarinhapvp.conta_ativa = nova_conta
        print(f"Conta criada com sucesso! Bem-vindo, {nome}.\n")
        return True



if adcionar_conta():
    
    conta = banco_sarinhapvp.conta_ativa
else:
    
    exit()


def excluir_conta(conta: Conta): 
    print("====Excluir Conta====")
    confirmacao = input("Tem certeza que deseja excluir sua conta? (s/n):\n ")
    if confirmacao.lower() == 's':
        
        conta.saldo = 0.0
        conta.historico.clear()
        
        banco_sarinhapvp.conta_ativa = None 
        print("Conta excluída com sucesso.")
        return True 
    else:
        print("Operação de exclusão cancelada.")
        return False


def depositar(conta: Conta): 
    print("\n====Depósito====")
    try:
        deposito = float(input("Quanto você deseja depositar?:\n "))
    except ValueError:
        print("Valor inválido.")
        return
        
    conta.saldo += deposito
    conta.historico.append(f"Depósito: R$ {deposito:.2f}")
    print(f"Depósito de R$ {deposito:.2f} realizado com sucesso! \nSeu saldo atual é R$ {conta.saldo:.2f} \n")


def sacar(conta: Conta):
    print("\n====Saque====")
    try:
        saque = float(input("Quanto você deseja sacar?:\n "))
    except ValueError:
        print("Valor inválido.")
        return
        
    if saque > conta.saldo:
        print("Saldo insuficiente para realizar o saque.")
    else:
        conta.saldo -= saque
        conta.historico.append(f"Saque: R$ {saque:.2f}")
        print(f"Saque de R$ {saque:.2f} realizado com sucesso! \nSeu saldo atual é R$ {conta.saldo:.2f} \n")


def ver_saldo_total(conta: Conta):
    print("\n====Saldo total====")
    print(f"Seu saldo atual é R$ {conta.saldo:.2f} \n")


def ver_historico(conta: Conta): 
    print("\n====Histórico de Transações====")
    print("Histórico de transações:")
    if not conta.historico:
        print("Nenhuma transação registrada.")
    else:
        for transacao in conta.historico:
            print(transacao)
    print()


def conceder_emprestimo(conta: Conta): 
    print("\n====Empréstimo====")
    try:
        valor_emprestimo = float(input("Qual o valor do empréstimo que você deseja?:\n "))
    except ValueError:
        print("Valor inválido.")
        return
        
    conta.saldo += valor_emprestimo
    conta.historico.append(f"Empréstimo: R$ {valor_emprestimo:.2f}")
    print(f"Empréstimo de R$ {valor_emprestimo:.2f} concedido com sucesso! \nSeu saldo atual é R$ {conta.saldo:.2f} \n")


def menu():
  
    if not banco_sarinhapvp.conta_ativa:
        return 
        
    conta_ativa = banco_sarinhapvp.conta_ativa
    
    while True:
        print("=== Menu ===")
        print("1. Depositar")
        print("2. Sacar")
        print("3. Ver saldo")
        print("4. Ver histórico de transações")
        print("5. Excluir conta")
        print("6. Conceder Empréstimo")
        print("7. Sair")

        opcao = input("Escolha uma opção: ")
        
        if opcao == "1":
            depositar(conta_ativa)
        elif opcao == "2":
            sacar(conta_ativa)
        elif opcao == "3":
            ver_saldo_total(conta_ativa)
        elif opcao == "4":
            ver_historico(conta_ativa)
        elif opcao == "5":
            if excluir_conta(conta_ativa):
                print("Quem sabe algum dia nos encontraremos novamente :( ...")
                break
        elif opcao == "6":
            conceder_emprestimo(conta_ativa)
        elif opcao == "7":
            print("Obrigado por usar o Banco sarinhaPVP. Até logo!")
            break
        else:
            print("Opção inválida. Tente novamente.")


if banco_sarinhapvp.conta_ativa:
    menu()
